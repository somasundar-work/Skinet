<header
  class="border-b shadow-md border-gray-200 w-full max-h-20 fixed top-0 z-50 bg-white px-4"
>
  <div class="flex flex-row align-middle justify-between items-center mx-auto">
    <div class="flex flex-row align-middle items-center">
      <img
        routerLink="/"
        src="logo.png"
        alt="logo"
        class="max-h-16 cursor-pointer"
      />
      <a
        routerLink="/"
        class="font-bold text-2xl hidden md:block cursor-pointer custom-header-brand"
      >
        Skinet E-Commerce</a
      >
    </div>
    <nav class="gap-3 my-2 uppercase text-xl flex">
      <a
        routerLink="/"
        routerLinkActive="active"
        [routerLinkActiveOptions]="{ exact: true }"
        class="mr-4 hidden md:block"
      >
        Home
      </a>
      <a routerLink="/shop" routerLinkActive="active" class="mr-4 block">
        Shop
      </a>
      <a
        routerLink="/error"
        routerLinkActive="active"
        class="mr-4 hidden md:block"
      >
        error
      </a>
    </nav>
    <nav class="flex gap-4 align-middle">
      <a
        routerLink="/cart"
        routerLinkActive="active"
        matBadge="{{ cartService.itemCount() }}"
        matBadgeSize="large"
        class="custom-badge mt-2 mr-2"
        matTooltip="View Cart"
      >
        <mat-icon>shopping_cart</mat-icon>
      </a>
      @if (accountService.currentUser()) {
      <mat-menu
        #userMenu="matMenu"
        class="bg-white shadow-2xl border border-gray-300 rounded-md"
      >
        <div class="arrow-up"></div>
        <span
          mat-menu-item
          class="flex items-center px-4 py-2 hover:bg-gray-100"
          (click)="$event.stopPropagation()"
        >
          <mat-icon class="mr-2">email</mat-icon>
          {{ accountService.currentUser()?.email }}
        </span>
        <mat-divider></mat-divider>
        <button
          mat-menu-item
          routerLink="/account/profile"
          class="flex items-center px-4 py-2 hover:bg-gray-100"
          matTooltip="View Profile"
        >
          <mat-icon class="mr-2">person</mat-icon>
          Profile
        </button>
        <mat-divider></mat-divider>
        <button
          mat-menu-item
          routerLink="/cart"
          class="flex items-center px-4 py-2 hover:bg-gray-100"
          matTooltip="View Profile"
        >
          <mat-icon class="mr-2">shopping_cart</mat-icon>
          My Cart
        </button>
        <mat-divider></mat-divider>
        <button
          mat-menu-item
          routerLink="/account/orders"
          class="flex items-center px-4 py-2 hover:bg-gray-100"
          matTooltip="View Profile"
        >
          <mat-icon class="mr-2">history</mat-icon>
          My Orders
        </button>
        <!-- <mat-divider></mat-divider>
        <mat-menu
          #currencyMenu="matMenu"
          class="bg-white shadow-2xl border border-gray-300 rounded-md"
        >
          <button
            mat-menu-item
            (click)="changeCurrency('USD')"
            class="flex items-center px-4 py-2 hover:bg-gray-100"
          >
            USD
          </button>
          <button
            mat-menu-item
            (click)="changeCurrency('INR')"
            class="flex items-center px-4 py-2 hover:bg-gray-100"
          >
            INR
          </button>
        </mat-menu>
        <button
          mat-menu-item
          [matMenuTriggerFor]="currencyMenu"
          class="flex items-center px-4 py-2 hover:bg-gray-100"
          matTooltip="Change Currency"
        >
          <mat-icon class="mr-2">attach_money</mat-icon>
          Change Currency - ({{ "INR" }})
        </button> -->
        <mat-divider></mat-divider>
        <button
          mat-menu-item
          (click)="logout()"
          class="flex items-center px-4 py-2 hover:bg-gray-100"
          matTooltip="Logout"
        >
          <mat-icon class="mr-2">logout</mat-icon>
          Logout
        </button>
      </mat-menu>
      <button
        mat-icon-button
        [matMenuTriggerFor]="userMenu"
        class="flex items-center custom-account-icon"
        matTooltip="Account"
      >
        <mat-icon>account_circle</mat-icon>
      </button>
      } @else {
      <button mat-stroked-button routerLink="/account/login" matTooltip="Login">
        Login
      </button>
      <button
        mat-flat-button
        routerLink="/account/register"
        matTooltip="Register"
      >
        Register
      </button>
      }
    </nav>
  </div>
</header>

@if (busyService.loading) {
<mat-progress-bar mode="indeterminate" class="fixed top-16 z-50">
</mat-progress-bar>
}
